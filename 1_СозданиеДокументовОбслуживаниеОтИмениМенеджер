#language: ru

@tree

Функционал: создание трех документов "Обслуживание клиента" под пользователем с правами "Менеджер"

Как тестировщик я хочу проверить работу данного програмного обеспечения
на предмет возможности создания документов "Обслуживание клиента" от имени пользователя с правами "Менеджер",
чтобы убедиться в работоспособности нового функционала и правильности распределения прав между пользователями приложения

Контекст:
	Дано Я запускаю сценарий открытия TestClient или подключаю уже существующий
	И я закрываю все окна клиентского приложения
	
Сценарий: создания трех документов "Обслуживание клиента" под пользователем с правими "Менеджер"
* Открываю форму списка документов "Обслуживания клиентов"
	И В командном интерфейсе я выбираю 'Обслуживание клиентов' 'Обслуживания клиентов'
	Тогда открылось окно 'Обслуживания клиентов'
* Создаю новый документ "Обслуживание клиента"
	И я нажимаю на кнопку с именем 'ФормаСоздать'
	Тогда открылось окно 'Обслуживание клиента (создание)'
	И я нажимаю кнопку выбора у поля с именем "Дата"
	И в поле с именем 'Дата' я ввожу текст '08.07.2024  0:00:00'
	* Создаю или выбираю элемент справочника "Контрагенты"
	И я нажимаю кнопку выбора у поля с именем "Клиент"
	Тогда открылось окно 'Контрагенты'
	Если в таблице "Список" нет строки Тогда
		| 'Наименование' 	  |
		| 'ООО \"Незабудка\"' |
		И я нажимаю на кнопку с именем 'ФормаСоздать'
		Тогда открылось окно 'Контрагент (создание)'
		И в поле с именем 'Наименование' я ввожу текст 'ООО \"Незабудка\"'
		И в поле с именем 'ИНН' я ввожу текст '7899877897'
		И в поле с именем 'КПП' я ввожу текст '615501001'
		И я нажимаю на кнопку с именем 'ФормаЗаписатьИЗакрыть'
		И я жду закрытия окна 'Контрагент (создание) *' в течение 20 секунд
	И в таблице "Список" я перехожу к строке:
		| 'Наименование' 	  |
		| 'ООО \"Незабудка\"' |
	И я нажимаю на кнопку с именем 'ФормаВыбрать'
	Тогда открылось окно 'Обслуживание клиента (создание) *'
	* Создаю или выбираю элемент справочника "Договоры контрагентов"
		И я нажимаю на кнопку создать поля с именем 'Договор'
		Тогда открылось окно 'Договор контрагента (создание)'
		И из выпадающего списка с именем "ВидДоговора" я выбираю точное значение 'Абонент'
		И в поле с именем 'ВКМ_Номер' я ввожу текст '6'
		И я нажимаю кнопку выбора у поля с именем "ВКМ_Дата"
		И в поле с именем 'ВКМ_Дата' я ввожу текст '01.07.2024'
		И из выпадающего списка с именем "Организация" я выбираю точное значение 'ООО "Ваш компьютерный мастер"'
		И в поле с именем 'ВКМ_СтоимостьЧасаРаботы' я ввожу текст '2 000,00'
		И я нажимаю кнопку выбора у поля с именем "ВКМ_СрокДействия"
		И в поле с именем 'ВКМ_СрокДействия' я ввожу текст '31.12.2024'
		И из выпадающего списка с именем 'Владелец' я выбираю точное значение "ООО \"Незабудка\""
		И я нажимаю на кнопку с именем 'ФормаЗаписатьИЗакрыть'
		И я жду закрытия окна "Договор контрагента (создание) *" в течение 20 секунд
		Тогда открылось окно "Обслуживание клиента (создание) *"
	* Выбираю "Специалиста" из списка справочника "Пользователи"
	И я нажимаю кнопку выбора у поля с именем "Специалист"
	Тогда открылось окно 'Выбор пользователя'
	И в таблице "ПользователиСписок" я перехожу к строке:
		| 'Полное имя'           |
		| 'Иванов Иван Иванович' |
	И в таблице "ПользователиСписок" я выбираю текущую строку
	Тогда открылось окно 'Обслуживание клиента (создание) *'
	* Заполняю оставшиеся поля документа
	И в поле с именем 'ОписаниеПроблемы' я ввожу текст 'Клиент просит настроить работу с электронными торговыми площадками на одном из своих компьютеров.'
	И в поле с именем 'Комментарий' я ввожу текст 'Не подведи специалист.'
	И я нажимаю кнопку выбора у поля с именем "ДатаПроведенияРабот"
	И в поле с именем 'ДатаПроведенияРабот' я ввожу текст '08.07.2024'
	И в поле с именем 'ВремяНачалаРабот' я ввожу текст ' 8:30:00'
	И в поле с именем 'ВремяОкончанияРабот' я ввожу текст '10:30:00'
	И я нажимаю на кнопку с именем 'ФормаЗаписать'
	Тогда открылось окно 'Обслуживание клиента * от *'
	И Я закрываю окно 'Обслуживание клиента * от *'
	Тогда открылось окно 'Обслуживания клиентов'

*Создаю новый документ "Обслуживание клиента"
	И я нажимаю на кнопку с именем 'ФормаСоздать'
	Тогда открылось окно 'Обслуживание клиента (создание)'
	И я нажимаю кнопку выбора у поля с именем "Дата"
	И в поле с именем 'Дата' я ввожу текст '09.07.2024  0:00:00'
	* Создаю или выбираю элемент справочника "Контрагенты"
	И я нажимаю кнопку выбора у поля с именем "Клиент"
	Тогда открылось окно 'Контрагенты'
	Если в таблице "Список" нет строки Тогда
		| 'Наименование'   |
		| 'ИП Бендер О.И.' |
		И я нажимаю на кнопку с именем 'ФормаСоздать'
		Тогда открылось окно 'Контрагент (создание)'
		И в поле с именем 'Наименование' я ввожу текст 'ИП Бендер О.И.'
		И в поле с именем 'ИНН' я ввожу текст '6055055684'
		И в поле с именем 'КПП' я ввожу текст '615501001'
		И я нажимаю на кнопку с именем 'ФормаЗаписатьИЗакрыть'
		И я жду закрытия окна 'Контрагент (создание) *' в течение 20 секунд
	И в таблице "Список" я перехожу к строке:
		| 'Наименование'   |
		| 'ИП Бендер О.И.' |
	И я нажимаю на кнопку с именем 'ФормаВыбрать'
	Тогда открылось окно 'Обслуживание клиента (создание) *'
	* Создаю или выбираю элемент справочника "Договоры контрагентов"
		И я нажимаю на кнопку создать поля с именем 'Договор'
		Тогда открылось окно 'Договор контрагента (создание)'
		И из выпадающего списка с именем "ВидДоговора" я выбираю точное значение 'Абонент'
		И в поле с именем 'ВКМ_Номер' я ввожу текст '7'
		И я нажимаю кнопку выбора у поля с именем "ВКМ_Дата"
		И в поле с именем 'ВКМ_Дата' я ввожу текст '01.07.2024'
		И из выпадающего списка с именем "Организация" я выбираю точное значение 'ООО "Ваш компьютерный мастер"'
		И в поле с именем 'ВКМ_СуммаАбонентскойПлаты' я ввожу текст '15 000,00'
		И я нажимаю кнопку выбора у поля с именем "ВКМ_СрокДействия"
		И в поле с именем 'ВКМ_СрокДействия' я ввожу текст '31.12.2024'
		И из выпадающего списка с именем 'Владелец' я выбираю точное значение "ИП Бендер О.И."
		И я нажимаю на кнопку с именем 'ФормаЗаписатьИЗакрыть'
		Тогда открылось окно "Обслуживание клиента (создание) *"
	* Выбираю "Специалиста" из списка справочника "Пользователи"
		Когда открылось окно "Обслуживание клиента (создание) *"
		И из выпадающего списка с именем 'Специалист' я выбираю точное значение "Иванов Иван Иванович"
	* Заполняю оставшиеся поля документа
	И в поле с именем 'ОписаниеПроблемы' я ввожу текст 'Клиент просит подобрать ему сервер для работы с конфигурацией 1С:ERP на 15 пользователей.'
	И в поле с именем 'Комментарий' я ввожу текст 'Тел. менеджера клиента: +7 928 (906) 6578.'
	И я нажимаю кнопку выбора у поля с именем "ДатаПроведенияРабот"
	И в поле с именем 'ДатаПроведенияРабот' я ввожу текст '09.07.2024'
	И в поле с именем 'ВремяНачалаРабот' я ввожу текст ' 9:00:00'
	И в поле с именем 'ВремяОкончанияРабот' я ввожу текст '15:00:00'
	И я нажимаю на кнопку с именем 'ФормаЗаписать'
	Тогда открылось окно 'Обслуживание клиента * от *'
	И Я закрываю окно 'Обслуживание клиента * от *'
	Тогда открылось окно 'Обслуживания клиентов'

*Создаю новый документ "Обслуживание клиента"
	И я нажимаю на кнопку с именем 'ФормаСоздать'
	Тогда открылось окно 'Обслуживание клиента (создание)'
	И я нажимаю кнопку выбора у поля с именем "Дата"
	И в поле с именем 'Дата' я ввожу текст '10.07.2024  0:00:00'
	* Создаю или выбираю элемент справочника "Контрагенты"
	И я нажимаю кнопку выбора у поля с именем "Клиент"
	Тогда открылось окно 'Контрагенты'
	Если в таблице "Список" нет строки Тогда
		| 'Наименование'    |
		| 'ООО \"Баримор\"' |
		И я нажимаю на кнопку с именем 'ФормаСоздать'
		Тогда открылось окно 'Контрагент (создание)'
		И в поле с именем 'Наименование' я ввожу текст 'ООО \"Баримор\"'
		И в поле с именем 'ИНН' я ввожу текст '7065064684'
		И в поле с именем 'КПП' я ввожу текст '715701001'
		И я нажимаю на кнопку с именем 'ФормаЗаписатьИЗакрыть'
		И я жду закрытия окна 'Контрагент (создание) *' в течение 20 секунд
	И в таблице "Список" я перехожу к строке:
		| 'Наименование'    |
		| 'ООО \"Баримор\"' |
	И я нажимаю на кнопку с именем 'ФормаВыбрать'
	Тогда открылось окно 'Обслуживание клиента (создание) *'
	* Создаю или выбираю элемент справочника "Договоры контрагентов"
	И я нажимаю на кнопку создать поля с именем 'Договор'
	Тогда открылось окно 'Договор контрагента(создание)'
		И из выпадающего списка с именем "ВидДоговора" я выбираю точное значение 'Абонент'
		И в поле с именем 'ВКМ_Номер' я ввожу текст '8'
		И я нажимаю кнопку выбора у поля с именем "ВКМ_Дата"
		И в поле с именем 'ВКМ_Дата' я ввожу текст '01.07.2024'
		И из выпадающего списка с именем "Организация" я выбираю точное значение 'ООО "Ваш компьютерный мастер"'
		И в поле с именем 'ВКМ_СуммаАбонентскойПлаты' я ввожу текст '12 000,00'
		И в поле с именем 'ВКМ_СтоимостьЧасаРаботы' я ввожу текст '1 000,00'
		И я нажимаю кнопку выбора у поля с именем "ВКМ_СрокДействия"
		И в поле с именем 'ВКМ_СрокДействия' я ввожу текст '31.12.2024'
		И из выпадающего списка с именем 'Владелец' я выбираю точное значение "ООО \"Баримор\""
		И я нажимаю на кнопку с именем 'ФормаЗаписатьИЗакрыть'
		И я жду закрытия окна "Договор контрагента (создание) *" в течение 20 секунд
	Тогда открылось окно 'Обслуживание клиента (создание) *'
	* Выбираю "Специалиста" из списка справочника "Пользователи"
	И я нажимаю кнопку выбора у поля с именем "Специалист"
	Тогда открылось окно 'Выбор пользователя'
	И в таблице "ПользователиСписок" я перехожу к строке:
		| 'Полное имя'           |
		| 'Иванов Иван Иванович' |
	И в таблице "ПользователиСписок" я выбираю текущую строку
	Тогда открылось окно 'Обслуживание клиента (создание) *'
	* Заполняю оставшиеся поля документа
	И в поле с именем 'ОписаниеПроблемы' я ввожу текст 'Настроить работу распределенных торговых баз в единой локальной вычислительной сети.'
	И в поле с именем 'Комментарий' я ввожу текст 'Предложите возможные варианты решения данной задачи.'
	И я нажимаю кнопку выбора у поля с именем "ДатаПроведенияРабот"
	И в поле с именем 'ДатаПроведенияРабот' я ввожу текст '10.07.2024'
	И в поле с именем 'ВремяНачалаРабот' я ввожу текст '10:00:00'
	И в поле с именем 'ВремяОкончанияРабот' я ввожу текст '16:00:00'
	И я нажимаю на кнопку с именем 'ФормаЗаписать'
	Тогда открылось окно 'Обслуживание клиента * от *'
	И Я закрываю окно 'Обслуживание клиента * от *'
	Тогда открылось окно 'Обслуживания клиентов'
	* Проверяю выполнение сценария тестировавния
	Тогда таблица "Список" содержит строки по шаблону:
		| 'Номер'     | 'Договор'                                  | 'Дата'                | 'Клиент'                       | 'Дата проведения работ' | 'Описание проблемы'                                                                                                                                                                                                                                | 'Время начала работ' | 'Время окончания работ' | 'Комментарий'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
		| '000000001' | 'Абонентский договор № 1 от 01.01.2024 г.' | '03.06.2024 8:00:00'  | 'ООО "Ромашка"'                | '03.06.2024'            | 'Клиенту требуется настроить работу информационных баз 1С через Web-сервер с возможностью работы через сеть Интернет для удаленных сотрудников.'                                                                                                   | '9:00:00'            | '15:00:00'              | 'Проверить, чтобы у всех пользователей 1С для всех баз данных был пароль отвечающий требованиям безопасности.\nОпубликовать две имеющиеся у клиента базы: БП 3.0 и УТ 11.5.\nНастроить на маршрутизаторе MicroTik проброс портов до внутреннего Web-сервера.\nНастроить внутренний DNS-сервер на разрешение внешнего доменного имени, чтоб можно было обращаться к внутреннему Web-серверу по внешнему доменному имени.\nПроверить работу 1С через Web-браузер.'                                                |
		| '000000002' | 'Абонентский договор № 2 от 01.01.2024 г.' | '03.06.2024 9:00:00'  | 'ООО "Василёк"'                | '03.06.2024'            | 'Необходимо установить консоль управления антивирусом Dr.Web на контроллере домена и с него установить антивирус на 15 компьютеров локальной сети.'                                                                                                | '9:00:00'            | '16:00:00'              | 'У клиента на некоторых компьютерах установлены различные бесплантые антивирусные решения, которые нужно будет предварительно удалить.'                                                                                                                                                                                                                                                                                                                                                                         |
		| '000000003' | 'Абонентский договор № 3 от 01.03.2024 г.' | '04.06.2024 8:30:00'  | 'ООО "Подорожник"'             | '04.06.2024'            | 'Клиент купил новое многофункциональное устройство (ECOSYS M3645dn) с сетевой печатью и сканированием документов. Необходимо подключить его к локальной сети по кабелю Ethernet. Настроить печать и сканирование документов с десяти компьютеров.' | '9:00:00'            | '14:00:00'              | 'Захвати с собой коннекторы RJ-45 и обжимной инструмент. Коннекторы за счёт фирмы.'                                                                                                                                                                                                                                                                                                                                                                                                                             |
		| '000000004' | 'Абонентский договор № 4 от 01.04.2024 г.' | '04.06.2024 9:15:00'  | 'ИП Васильев Андрей Андреевич' | '04.06.2024'            | 'Необходимо обновить четыре информационные базы на сервере у клиента через удаленный доступ.'                                                                                                                                                      | '10:00:00'           | '13:00:00'              | 'Контакт для связи.\nГлавный бухгалтер: Степанова Наталья Викторовна\nТелефон: +7 (927) 452-1221'                                                                                                                                                                                                                                                                                                                                                                                                               |
		| '000000005' | 'Абонентский договор № 5 от 25.03.2024 г.' | '04.06.2024 16:20:00' | 'ООО "Рога и копыта"'          | '05.06.2024'            | 'Необходимо на месте обновить две информационные базы 1С работающие в файловом режиме.'                                                                                                                                                            | '9:00:00'            | '11:00:00'              | 'Ехать до места примерно полчаса.'                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
		| '000000006' | 'Абонентский договор № 1 от 01.01.2024 г.' | '05.06.2024 8:45:00'  | 'ООО "Ромашка"'                | '05.06.2024'            | 'Клиенту нужно настроить резервное копирование баз 1С на сервере.'                                                                                                                                                                                 | '10:00:00'           | '13:00:00'              | 'План такой:\n1. Покупаешь на заличный расчет внешний жесткий диск с USB 3.0 на 1Тб берешь товарный и кассовый чек. (Клиент вернет тебе деньги по этим документам)\n2. Едешь к клиенту.\n3. Подключаешь к серверу этот диск и настраиваешь резервное копирование с помощью бессплатной утилиты Cobian Backup.'                                                                                                                                                                                                  |
		| '000000007' | 'Абонентский договор № 2 от 01.01.2024 г.' | '05.06.2024 15:00:00' | 'ООО "Василёк"'                | '06.06.2024'            | 'Клиент просит настроить внутренний электронный документооборот и задействовать систему взаимодействие.'                                                                                                                                           | '9:00:00'            | '17:00:00'              | 'Практически все пользователи предприятия работают в базах 1С:Предприятия.\n1. Необходимо проверить, чтобы все пользователи работали под своими учетными записями, у кого нет настроить отдельную учетную запись.\n2. Сделать всем пользователям уникальные пароли не менее 8 символов длиной.\n3. Настроить разграничение прав на основе групп для внутреннего электронного документооборота.\n4. Настроить маршруты подписания для нескольких основных форм документов.\n5. Провести обучение пользователей.' |
		| '000000008' | 'Абонентский договор № 3 от 01.03.2024 г.' | '06.06.2024 11:00:00' | 'ООО "Подорожник"'             | '07.06.2024'            | 'Разработать отчет для кадровика на основе СКД в 1С:ЗУП 3.1.'                                                                                                                                                                                      | '10:00:00'           | '16:00:00'              | ''                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
		| '000000009' | 'Абонентский договор № 4 от 01.04.2024 г.' | '07.06.2024 9:00:00'  | 'ИП Васильев Андрей Андреевич' | '07.06.2024'            | 'У клиента выключается сервер при отключении электричества хотя установлен ИБП Ippon INOVA RT 2000.'                                                                                                                                               | '11:00:00'           | '13:00:00'              | 'По всей видимости неисправны аккумуляторные баттарии. На данной модели установлено шесть батарей 12х9 Аh. По нашему совету клиент уже купил такие батареи.\nТвоя задача отключить всех пользователей от базы 1С и выключить сервер.\nЗатем отключить ИБП от сервера и заменить в нём аккумуляторы.\nСобрать ИБП и подключить сервер через ИБП.\nВключить сервер и проверить, что всё работает штатно.'                                                                                                         |
		| '000000010' | 'Абонентский договор № 5 от 25.03.2024 г.' | '10.06.2024 8:30:00'  | 'ООО "Рога и копыта"'          | '10.06.2024'            | 'Клиенту требуется настроить работу информационных баз 1С через Web-сервер с возможностью работы через сеть Интернет для удаленных сотрудников.'                                                                                                   | '10:00:00'           | '16:00:00'              | 'Проверить, чтобы у всех пользователей 1С для всех баз данных был пароль отвечающий требованиям безопасности.\nОпубликовать две имеющиеся у клиента базы: БП 3.0 и УТ 11.5.\nНастроить на маршрутизаторе MicroTik проброс портов до внутреннего Web-сервера.\nНастроить внутренний DNS-сервер на разрешение внешнего доменного имени, чтоб можно было обращаться к внутреннему Web-серверу по внешнему доменному имени.\nПроверить работу 1С через Web-браузер.'                                                |
		| '000000011' | 'Абонентский договор № 1 от 01.01.2024 г.' | '01.07.2024 12:00:00' | 'ООО "Ромашка"'                | '01.07.2024'            | 'Настроить новый сервер с использованием виртуализации VMware и установить две виртуальные машины (часть 1)'                                                                                                                                       | '9:00:00'            | '18:00:00'              | ''                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
		| '000000014' | 'Абонентский договор № 3 от 01.03.2024 г.' | '02.07.2024 11:50:00' | 'ООО "Подорожник"'             | '02.07.2024'            | 'Настроить три новых комьпютера для пользователей организации'                                                                                                                                                                                     | '9:00:00'            | '18:00:00'              | ''                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
		| '000000012' | 'Абонентский договор № 2 от 01.01.2024 г.' | '02.07.2024 12:00:00' | 'ООО "Василёк"'                | '01.07.2024'            | 'Доработать печатную форму в 1С:Бухгалтерия 3.0'                                                                                                                                                                                                   | '9:00:00'            | '14:00:00'              | ''                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
		| '000000013' | 'Абонентский договор № 1 от 01.01.2024 г.' | '02.07.2024 12:00:01' | 'ООО "Ромашка"'                | '02.07.2024'            | 'Настроить новый сервер с использованием виртуализации VMware и установить две виртуальные машины (часть 2)'                                                                                                                                       | '9:00:00'            | '18:00:00'              | ''                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
		| '000000015' | 'Абонентский договор № 5 от 25.03.2024 г.' | '02.07.2024 12:00:02' | 'ООО "Рога и копыта"'          | '03.07.2024'            | 'Настроить распределенную сеть на базе маршрутизаторов MikroTik для трёх офисов клиента с динамической маршрутизацией.'                                                                                                                            | '9:00:00'            | '18:00:00'              | ''                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
		| '000000016' | 'Абонентский договор № 4 от 01.04.2024 г.' | '03.07.2024 12:00:00' | 'ИП Васильев Андрей Андреевич' | '04.07.2024'            | 'Заменить в RAID-массиве СХД IBM DS3512 два неисправных жестких диска'                                                                                                                                                                             | '10:00:00'           | '12:00:00'              | ''                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
		| '000000017' | 'Абонентский договор № 1 от 01.01.2024 г.' | '04.07.2024 12:00:00' | 'ООО "Ромашка"'                | '05.07.2024'            | 'Клиенту нужно опубликовать базу 1С через Web.'                                                                                                                                                                                                    | '9:00:00'            | '12:00:00'              | ''                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
		| '000000018' | 'Абонентский договор № 6 от 01.07.2024 г.' | '08.07.2024 12:00:00' | 'ООО "Незабудка"'              | '08.07.2024'            | 'Клиент просит настроить работу с электронными торговыми площадками на одном из своих компьютеров.'                                                                                                                                                | '8:30:00'            | '10:30:00'              | 'Не подведи специалист.'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
		| '000000019' | 'Абонентский договор № 7 от 01.07.2024 г.' | '09.07.2024 12:00:00' | 'ИП Бендер О.И.'               | '09.07.2024'            | 'Клиент просит подобрать ему сервер для работы с конфигурацией 1С:ERP на 15 пользователей.'                                                                                                                                                        | '9:00:00'            | '15:00:00'              | 'Тел. менеджера клиента: +7 928 (906) 6578.'                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
		| '000000020' | 'Абонентский договор № 8 от 01.07.2024 г.' | '10.07.2024 12:00:00' | 'ООО "Баримор"'                | '10.07.2024'            | 'Настроить работу распределенных торговых баз в единой локальной вычислительной сети.'                                                                                                                                                             | '10:00:00'           | '16:00:00'              | 'Предложите возможные варианты решения данной задачи.'                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
				
